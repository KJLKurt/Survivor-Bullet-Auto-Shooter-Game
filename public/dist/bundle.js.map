{
  "version": 3,
  "sources": ["../../src/config.js", "../../src/audio/sfx.js", "../../src/data/characters.js", "../../src/data/items.js", "../../src/data/levels.js", "../../src/game/engine.js", "../../src/utils/vector.js", "../../src/game/enemy.js", "../../src/game/input.js", "../../src/game/level.js", "../../src/game/player.js", "../../src/game/projectile.js", "../../src/game/render.js", "../../src/game/shop.js", "../../src/game/ui.js", "../../src/storage/storageAdapter.js", "../../src/storage/localStorageAdapter.js", "../../src/main.js"],
  "sourcesContent": ["export const STEP_SECONDS = 1 / 60;\nexport const MAX_FRAME_SECONDS = 0.05;\n\nexport const STORAGE_KEYS = {\n  PROFILE: \"survivor.profile.v1\",\n  SETTINGS: \"survivor.settings.v1\",\n  HINT_SEEN: \"survivor.hintSeen.v1\"\n};\n\nexport const WORLD = {\n  WIDTH: 960,\n  HEIGHT: 540,\n  PLAYER_SPAWN_X: 480,\n  PLAYER_SPAWN_Y: 300\n};\n\nexport const COLORS = {\n  PLAYER: \"#53cdf8\",\n  PLAYER_CORE: \"#ffd089\",\n  AIM: \"#9fe8ff\",\n  PLAYER_PROJECTILE: \"#ffe1a8\",\n  ENEMY_PROJECTILE: \"#ff7070\",\n  ENEMY: \"#ff8b7b\",\n  ENEMY_FLASH: \"#fff2aa\",\n  COIN: \"#f6d15e\",\n  COIN_STROKE: \"#9f7e1a\",\n  HUD_TEXT: \"#d7f3ff\"\n};\n\nexport const LIMITS = {\n  MAX_ENEMIES: 64,\n  MAX_PROJECTILES: 420,\n  MAX_COINS: 180\n};\n\nexport const SIZES = {\n  PLAYER: 16,\n  ENEMY_SMALL: 18,\n  ENEMY_MEDIUM: 24,\n  ENEMY_LARGE: 30,\n  PROJECTILE: 6,\n  ENEMY_PROJECTILE: 7,\n  COIN: 5\n};\n\nexport const TUNING = {\n  PLAYER_INVULN_MS_ON_HIT: 220,\n  COIN_LIFETIME_SECONDS: 10,\n  COIN_PICKUP_BASE_RADIUS: 36,\n  COIN_MAGNET_PER_LEVEL: 11,\n  ENEMY_FLASH_SECONDS: 0.08,\n  SHOOT_FALLBACK_Y: -1\n};\n\nexport const WEAPONS = [\n  {\n    id: \"pulse\",\n    name: \"Pulse Blaster\",\n    cooldownMs: 280,\n    projectileSpeed: 440,\n    damage: 11,\n    spreadDegrees: 2,\n    projectilesPerShot: 1,\n    special: \"none\"\n  },\n  {\n    id: \"twin\",\n    name: \"Twin Fork\",\n    cooldownMs: 340,\n    projectileSpeed: 420,\n    damage: 8,\n    spreadDegrees: 12,\n    projectilesPerShot: 2,\n    special: \"piercing\"\n  },\n  {\n    id: \"nova\",\n    name: \"Nova Scatter\",\n    cooldownMs: 560,\n    projectileSpeed: 390,\n    damage: 7,\n    spreadDegrees: 28,\n    projectilesPerShot: 5,\n    special: \"explosive\"\n  },\n  {\n    id: \"rail\",\n    name: \"Rail Needle\",\n    cooldownMs: 520,\n    projectileSpeed: 560,\n    damage: 22,\n    spreadDegrees: 0,\n    projectilesPerShot: 1,\n    special: \"piercing\"\n  }\n];\n\nexport const WEAPONS_BY_ID = Object.fromEntries(WEAPONS.map((weapon) => [weapon.id, weapon]));\n\nexport const DEFAULT_PROFILE = {\n  bankCoins: 0,\n  totalCoinsCollected: 0,\n  playCount: 0,\n  highScore: 0,\n  levelsCompleted: [],\n  perLevelBest: {},\n  ownedLevels: {},\n  selectedCharacterId: \"runner\",\n  selectedWeaponId: \"pulse\",\n  unlockedCharacters: [\"runner\"],\n  unlockedWeapons: [\"pulse\"]\n};\n\nexport const DEFAULT_SETTINGS = {\n  sfxEnabled: true\n};\n", "function getAudioContextClass() {\n  return window.AudioContext || window.webkitAudioContext;\n}\n\nexport class Sfx {\n  constructor() {\n    this.registry = new Map();\n    this.enabled = true;\n    this.audioContext = null;\n    this.unlocked = false;\n    this.unlockHandler = null;\n  }\n\n  setEnabled(enabled) {\n    this.enabled = Boolean(enabled);\n  }\n\n  getContext() {\n    if (!this.audioContext) {\n      const Ctx = getAudioContextClass();\n      if (!Ctx) {\n        return null;\n      }\n      this.audioContext = new Ctx();\n    }\n    return this.audioContext;\n  }\n\n  enableAutoUnlock() {\n    if (this.unlockHandler) {\n      return;\n    }\n\n    this.unlockHandler = async () => {\n      this.unlocked = true;\n      const ctx = this.getContext();\n      if (ctx?.state === \"suspended\") {\n        await ctx.resume().catch(() => {});\n      }\n\n      for (const eventName of [\"pointerdown\", \"keydown\", \"touchstart\"]) {\n        window.removeEventListener(eventName, this.unlockHandler);\n      }\n    };\n\n    for (const eventName of [\"pointerdown\", \"keydown\", \"touchstart\"]) {\n      window.addEventListener(eventName, this.unlockHandler, { once: true, passive: true });\n    }\n  }\n\n  register(name, clip) {\n    this.registry.set(name, clip);\n  }\n\n  play(name, options = {}) {\n    if (!this.enabled || !this.unlocked) {\n      return;\n    }\n\n    const clip = this.registry.get(name);\n    if (!clip) {\n      return;\n    }\n\n    const ctx = this.getContext();\n    if (!ctx) {\n      return;\n    }\n\n    if (clip instanceof AudioBuffer) {\n      const source = ctx.createBufferSource();\n      source.buffer = clip;\n      source.connect(ctx.destination);\n      source.start();\n      return;\n    }\n\n    if (typeof clip === \"function\") {\n      clip(ctx, options);\n    }\n  }\n}\n\nfunction beep(ctx, { frequency = 440, duration = 0.08, type = \"square\", volume = 0.03, slide = 0 }) {\n  const oscillator = ctx.createOscillator();\n  const gain = ctx.createGain();\n\n  oscillator.type = type;\n  oscillator.frequency.value = frequency;\n  if (slide) {\n    oscillator.frequency.linearRampToValueAtTime(frequency + slide, ctx.currentTime + duration);\n  }\n\n  gain.gain.setValueAtTime(volume, ctx.currentTime);\n  gain.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + duration);\n\n  oscillator.connect(gain);\n  gain.connect(ctx.destination);\n  oscillator.start();\n  oscillator.stop(ctx.currentTime + duration);\n}\n\nexport function createDefaultSfx() {\n  const sfx = new Sfx();\n  sfx.enableAutoUnlock();\n\n  sfx.register(\"shoot\", (ctx) => beep(ctx, { frequency: 760, duration: 0.05, type: \"square\", volume: 0.02, slide: -160 }));\n  sfx.register(\"hit\", (ctx) => beep(ctx, { frequency: 280, duration: 0.06, type: \"triangle\", volume: 0.03, slide: -30 }));\n  sfx.register(\"enemyDeath\", (ctx) => beep(ctx, { frequency: 180, duration: 0.1, type: \"sawtooth\", volume: 0.04, slide: -120 }));\n  sfx.register(\"coin\", (ctx) => beep(ctx, { frequency: 960, duration: 0.04, type: \"triangle\", volume: 0.03, slide: 120 }));\n  sfx.register(\"levelUp\", (ctx) => {\n    beep(ctx, { frequency: 520, duration: 0.06, type: \"triangle\", volume: 0.03, slide: 120 });\n    beep(ctx, { frequency: 690, duration: 0.08, type: \"triangle\", volume: 0.03, slide: 140 });\n  });\n  sfx.register(\"shopBuy\", (ctx) => beep(ctx, { frequency: 640, duration: 0.08, type: \"square\", volume: 0.03, slide: 80 }));\n  sfx.register(\"updateAvailable\", (ctx) => beep(ctx, { frequency: 430, duration: 0.18, type: \"sine\", volume: 0.03, slide: 80 }));\n\n  return sfx;\n}\n", "export const CHARACTERS = [\n  {\n    id: \"runner\",\n    name: \"Runner\",\n    startingWeaponId: \"pulse\",\n    stats: {\n      maxHealth: 110,\n      healthRegen: 2.8,\n      speed: 218,\n      baseDamage: 10,\n      cooldownMs: 290,\n      size: 15,\n      armorPercent: 0.04\n    },\n    unlockCondition: { type: \"default\", value: 0 }\n  },\n  {\n    id: \"bulwark\",\n    name: \"Bulwark\",\n    startingWeaponId: \"pulse\",\n    stats: {\n      maxHealth: 170,\n      healthRegen: 2,\n      speed: 168,\n      baseDamage: 12,\n      cooldownMs: 320,\n      size: 18,\n      armorPercent: 0.18\n    },\n    unlockCondition: { type: \"coins\", value: 120 }\n  },\n  {\n    id: \"spark\",\n    name: \"Spark\",\n    startingWeaponId: \"twin\",\n    stats: {\n      maxHealth: 95,\n      healthRegen: 2.4,\n      speed: 240,\n      baseDamage: 8,\n      cooldownMs: 220,\n      size: 14,\n      armorPercent: 0.02\n    },\n    unlockCondition: { type: \"playCount\", value: 3 }\n  },\n  {\n    id: \"warden\",\n    name: \"Warden\",\n    startingWeaponId: \"rail\",\n    stats: {\n      maxHealth: 150,\n      healthRegen: 2.2,\n      speed: 182,\n      baseDamage: 15,\n      cooldownMs: 420,\n      size: 17,\n      armorPercent: 0.12\n    },\n    unlockCondition: { type: \"score\", value: 1400 }\n  },\n  {\n    id: \"rift\",\n    name: \"Rift\",\n    startingWeaponId: \"nova\",\n    stats: {\n      maxHealth: 105,\n      healthRegen: 2.1,\n      speed: 205,\n      baseDamage: 13,\n      cooldownMs: 370,\n      size: 16,\n      armorPercent: 0.06\n    },\n    unlockCondition: { type: \"levelsCompleted\", value: 1 }\n  },\n  {\n    id: \"echo\",\n    name: \"Echo\",\n    startingWeaponId: \"twin\",\n    stats: {\n      maxHealth: 120,\n      healthRegen: 3.2,\n      speed: 198,\n      baseDamage: 9,\n      cooldownMs: 250,\n      size: 15,\n      armorPercent: 0.05\n    },\n    unlockCondition: { type: \"coins\", value: 380 }\n  },\n  {\n    id: \"viper\",\n    name: \"Viper\",\n    startingWeaponId: \"rail\",\n    stats: {\n      maxHealth: 100,\n      healthRegen: 1.9,\n      speed: 245,\n      baseDamage: 16,\n      cooldownMs: 470,\n      size: 14,\n      armorPercent: 0.03\n    },\n    unlockCondition: { type: \"score\", value: 2600 }\n  },\n  {\n    id: \"atlas\",\n    name: \"Atlas\",\n    startingWeaponId: \"pulse\",\n    stats: {\n      maxHealth: 210,\n      healthRegen: 2.5,\n      speed: 158,\n      baseDamage: 14,\n      cooldownMs: 340,\n      size: 20,\n      armorPercent: 0.2\n    },\n    unlockCondition: { type: \"levelsCompleted\", value: 2 }\n  },\n  {\n    id: \"aster\",\n    name: \"Aster\",\n    startingWeaponId: \"nova\",\n    stats: {\n      maxHealth: 112,\n      healthRegen: 2.6,\n      speed: 214,\n      baseDamage: 11,\n      cooldownMs: 300,\n      size: 15,\n      armorPercent: 0.07\n    },\n    unlockCondition: { type: \"playCount\", value: 9 }\n  },\n  {\n    id: \"sol\",\n    name: \"Sol\",\n    startingWeaponId: \"rail\",\n    stats: {\n      maxHealth: 132,\n      healthRegen: 2.4,\n      speed: 190,\n      baseDamage: 18,\n      cooldownMs: 450,\n      size: 16,\n      armorPercent: 0.1\n    },\n    unlockCondition: { type: \"score\", value: 4200 }\n  }\n];\n\nexport const CHARACTERS_BY_ID = Object.fromEntries(CHARACTERS.map((character) => [character.id, character]));\n", "export const ITEMS = [\n  {\n    id: \"vitality_core\",\n    name: \"Vitality Core\",\n    kind: \"upgrade\",\n    description: \"Increase max health with diminishing gains.\",\n    maxLevel: 5,\n    costs: [20, 45, 80, 130, 190],\n    effect: { stat: \"maxHealth\", mode: \"add\", perLevel: 14 }\n  },\n  {\n    id: \"regen_thread\",\n    name: \"Regen Thread\",\n    kind: \"upgrade\",\n    description: \"Improve passive health regeneration.\",\n    maxLevel: 4,\n    costs: [25, 55, 95, 150],\n    effect: { stat: \"healthRegen\", mode: \"add\", perLevel: 0.42 }\n  },\n  {\n    id: \"agility_shards\",\n    name: \"Agility Shards\",\n    kind: \"upgrade\",\n    description: \"Boost movement speed.\",\n    maxLevel: 5,\n    costs: [30, 65, 110, 170, 245],\n    effect: { stat: \"speed\", mode: \"add\", perLevel: 10 }\n  },\n  {\n    id: \"reinforced_plating\",\n    name: \"Reinforced Plating\",\n    kind: \"upgrade\",\n    description: \"Increase armor percentage.\",\n    maxLevel: 4,\n    costs: [35, 80, 140, 220],\n    effect: { stat: \"armorPercent\", mode: \"add\", perLevel: 0.03 }\n  },\n  {\n    id: \"focusing_lens\",\n    name: \"Focusing Lens\",\n    kind: \"upgrade\",\n    description: \"Scale outgoing damage.\",\n    maxLevel: 5,\n    costs: [40, 92, 154, 228, 315],\n    effect: { stat: \"damageMultiplier\", mode: \"mult\", perLevel: 0.1 }\n  },\n  {\n    id: \"quick_chamber\",\n    name: \"Quick Chamber\",\n    kind: \"upgrade\",\n    description: \"Raise fire rate with smaller late gains.\",\n    maxLevel: 5,\n    costs: [34, 76, 129, 198, 286],\n    effect: { stat: \"fireRateMultiplier\", mode: \"mult\", perLevel: 0.08 }\n  },\n  {\n    id: \"kinetic_booster\",\n    name: \"Kinetic Booster\",\n    kind: \"upgrade\",\n    description: \"Increase projectile speed.\",\n    maxLevel: 4,\n    costs: [22, 49, 86, 140],\n    effect: { stat: \"projectileSpeedMultiplier\", mode: \"mult\", perLevel: 0.12 }\n  },\n  {\n    id: \"coin_magnet\",\n    name: \"Coin Magnet\",\n    kind: \"upgrade\",\n    description: \"Expand coin pickup radius.\",\n    maxLevel: 5,\n    costs: [16, 36, 60, 90, 126],\n    effect: { stat: \"pickupRadius\", mode: \"add\", perLevel: 11 }\n  },\n  {\n    id: \"stability_mesh\",\n    name: \"Stability Mesh\",\n    kind: \"upgrade\",\n    description: \"Reduce hitbox size slightly.\",\n    maxLevel: 3,\n    costs: [28, 68, 125],\n    effect: { stat: \"size\", mode: \"add\", perLevel: -0.9 }\n  },\n  {\n    id: \"assault_matrix\",\n    name: \"Assault Matrix\",\n    kind: \"upgrade\",\n    description: \"Add flat base damage.\",\n    maxLevel: 4,\n    costs: [33, 72, 121, 185],\n    effect: { stat: \"baseDamage\", mode: \"add\", perLevel: 1.8 }\n  },\n  {\n    id: \"coolant_loop\",\n    name: \"Coolant Loop\",\n    kind: \"upgrade\",\n    description: \"Lower cooldown baseline.\",\n    maxLevel: 4,\n    costs: [29, 63, 108, 166],\n    effect: { stat: \"cooldownMs\", mode: \"add\", perLevel: -16 }\n  },\n  {\n    id: \"surge_lattice\",\n    name: \"Surge Lattice\",\n    kind: \"upgrade\",\n    description: \"Small all-round scaling for late game.\",\n    maxLevel: 3,\n    costs: [90, 170, 285],\n    effect: { stat: \"damageMultiplier\", mode: \"mult\", perLevel: 0.06 }\n  }\n];\n\nexport const ITEMS_BY_ID = Object.fromEntries(ITEMS.map((item) => [item.id, item]));\n", "export const LEVELS = [\n  {\n    id: \"dockyard\",\n    name: \"Storm Dockyard\",\n    backgroundColor: \"#102034\",\n    durationSeconds: 85,\n    spawnIntervalSeconds: 1.15,\n    difficulty: 1,\n    waves: [\n      { start: 0, end: 24, type: \"skitter\", pattern: \"wave\", spawnMultiplier: 1 },\n      { start: 24, end: 50, type: \"skitter\", pattern: \"aimed_burst\", spawnMultiplier: 0.9 },\n      { start: 50, end: 85, type: \"brute\", pattern: \"radial\", spawnMultiplier: 0.8 }\n    ]\n  },\n  {\n    id: \"citadel\",\n    name: \"Fracture Citadel\",\n    backgroundColor: \"#2b1b28\",\n    durationSeconds: 95,\n    spawnIntervalSeconds: 1,\n    difficulty: 2,\n    waves: [\n      { start: 0, end: 30, type: \"skitter\", pattern: \"spiral\", spawnMultiplier: 0.95 },\n      { start: 30, end: 62, type: \"brute\", pattern: \"aimed_burst\", spawnMultiplier: 0.82 },\n      { start: 62, end: 95, type: \"elite\", pattern: \"radial\", spawnMultiplier: 0.78 }\n    ]\n  },\n  {\n    id: \"riftcore\",\n    name: \"Riftcore Gate\",\n    backgroundColor: \"#182431\",\n    durationSeconds: 110,\n    spawnIntervalSeconds: 0.9,\n    difficulty: 3,\n    waves: [\n      { start: 0, end: 38, type: \"brute\", pattern: \"spiral\", spawnMultiplier: 0.88 },\n      { start: 38, end: 74, type: \"elite\", pattern: \"wave\", spawnMultiplier: 0.75 },\n      { start: 74, end: 110, type: \"elite\", pattern: \"aimed_burst\", spawnMultiplier: 0.68 }\n    ]\n  }\n];\n\nexport const LEVELS_BY_ID = Object.fromEntries(LEVELS.map((level) => [level.id, level]));\n", "import { MAX_FRAME_SECONDS, STEP_SECONDS } from \"../config.js\";\n\nexport class Engine {\n  constructor({ update, render, stepSeconds = STEP_SECONDS, maxFrameSeconds = MAX_FRAME_SECONDS, now = () => performance.now() }) {\n    this.update = update;\n    this.render = render;\n    this.stepSeconds = stepSeconds;\n    this.maxFrameSeconds = maxFrameSeconds;\n    this.now = now;\n\n    this.accumulator = 0;\n    this.lastTimestamp = null;\n    this.running = false;\n    this.rafId = null;\n\n    this.boundFrame = this.frame.bind(this);\n  }\n\n  frame(timestampMs = this.now()) {\n    if (this.lastTimestamp === null) {\n      this.lastTimestamp = timestampMs;\n      this.render(0);\n      return { steps: 0, alpha: 0, frameTimeSeconds: 0 };\n    }\n\n    let frameTimeSeconds = (timestampMs - this.lastTimestamp) / 1000;\n    this.lastTimestamp = timestampMs;\n\n    if (frameTimeSeconds > this.maxFrameSeconds) {\n      frameTimeSeconds = this.maxFrameSeconds;\n    }\n\n    this.accumulator += frameTimeSeconds;\n    let steps = 0;\n\n    while (this.accumulator >= this.stepSeconds) {\n      this.update(this.stepSeconds);\n      this.accumulator -= this.stepSeconds;\n      steps += 1;\n    }\n\n    const alpha = this.accumulator / this.stepSeconds;\n    this.render(alpha);\n\n    return { steps, alpha, frameTimeSeconds };\n  }\n\n  start() {\n    if (this.running) {\n      return;\n    }\n    this.running = true;\n    this.lastTimestamp = null;\n\n    const loop = (timestamp) => {\n      if (!this.running) {\n        return;\n      }\n      this.frame(timestamp);\n      this.rafId = requestAnimationFrame(loop);\n    };\n\n    this.rafId = requestAnimationFrame(loop);\n  }\n\n  stop() {\n    this.running = false;\n    if (this.rafId !== null) {\n      cancelAnimationFrame(this.rafId);\n      this.rafId = null;\n    }\n  }\n}\n", "export function vec(x = 0, y = 0) {\n  return { x, y };\n}\n\nexport function add(a, b) {\n  return { x: a.x + b.x, y: a.y + b.y };\n}\n\nexport function subtract(a, b) {\n  return { x: a.x - b.x, y: a.y - b.y };\n}\n\nexport function scale(v, factor) {\n  return { x: v.x * factor, y: v.y * factor };\n}\n\nexport function length(v) {\n  return Math.hypot(v.x, v.y);\n}\n\nexport function normalize(v) {\n  const len = length(v);\n  if (!len) {\n    return { x: 0, y: 0 };\n  }\n  return { x: v.x / len, y: v.y / len };\n}\n\nexport function clampMagnitude(v, maxLength) {\n  const len = length(v);\n  if (!len || len <= maxLength) {\n    return { x: v.x, y: v.y };\n  }\n  const ratio = maxLength / len;\n  return { x: v.x * ratio, y: v.y * ratio };\n}\n\nexport function lerp(a, b, alpha) {\n  return a + (b - a) * alpha;\n}\n\nexport function lerpVec(a, b, alpha) {\n  return {\n    x: lerp(a.x, b.x, alpha),\n    y: lerp(a.y, b.y, alpha)\n  };\n}\n\nexport function fromAngle(radians) {\n  return { x: Math.cos(radians), y: Math.sin(radians) };\n}\n\nexport function angleOf(v) {\n  return Math.atan2(v.y, v.x);\n}\n", "import { SIZES, TUNING, WORLD } from \"../config.js\";\nimport { fromAngle, normalize } from \"../utils/vector.js\";\n\nexport const ENEMY_ARCHETYPES = {\n  skitter: {\n    size: SIZES.ENEMY_SMALL,\n    speed: 64,\n    maxHealth: 18,\n    damage: 9,\n    shotDamage: 7,\n    shotSpeed: 190,\n    shootCooldown: 1.3\n  },\n  brute: {\n    size: SIZES.ENEMY_MEDIUM,\n    speed: 44,\n    maxHealth: 36,\n    damage: 14,\n    shotDamage: 11,\n    shotSpeed: 170,\n    shootCooldown: 1.9\n  },\n  elite: {\n    size: SIZES.ENEMY_LARGE,\n    speed: 58,\n    maxHealth: 58,\n    damage: 18,\n    shotDamage: 13,\n    shotSpeed: 220,\n    shootCooldown: 1.15\n  }\n};\n\nfunction spawnEdgePosition(size, world = WORLD) {\n  const edge = Math.floor(Math.random() * 4);\n  if (edge === 0) {\n    return { x: Math.random() * world.WIDTH, y: -size * 2 };\n  }\n  if (edge === 1) {\n    return { x: world.WIDTH + size * 2, y: Math.random() * world.HEIGHT };\n  }\n  if (edge === 2) {\n    return { x: Math.random() * world.WIDTH, y: world.HEIGHT + size * 2 };\n  }\n  return { x: -size * 2, y: Math.random() * world.HEIGHT };\n}\n\nexport function createEnemy(id, type, pattern, difficulty = 1, world = WORLD) {\n  const archetype = ENEMY_ARCHETYPES[type] ?? ENEMY_ARCHETYPES.skitter;\n  const spawn = spawnEdgePosition(archetype.size, world);\n\n  return {\n    id,\n    type,\n    pattern,\n    x: spawn.x,\n    y: spawn.y,\n    prevX: spawn.x,\n    prevY: spawn.y,\n    size: archetype.size,\n    speed: archetype.speed + difficulty * 4,\n    maxHealth: archetype.maxHealth * (1 + difficulty * 0.08),\n    health: archetype.maxHealth * (1 + difficulty * 0.08),\n    contactDamage: archetype.damage,\n    shotDamage: archetype.shotDamage,\n    shotSpeed: archetype.shotSpeed,\n    shootCooldown: Math.max(0.32, archetype.shootCooldown - difficulty * 0.04),\n    shootTimer: 0,\n    spiralAngle: 0,\n    alive: true,\n    flashDuration: TUNING.ENEMY_FLASH_SECONDS,\n    flashTimer: 0\n  };\n}\n\nexport function saveEnemyPrevious(enemy) {\n  enemy.prevX = enemy.x;\n  enemy.prevY = enemy.y;\n}\n\nfunction enemyMovement(enemy, player, dtSeconds, elapsedSeconds) {\n  const toPlayer = normalize({ x: player.x - enemy.x, y: player.y - enemy.y });\n\n  if (enemy.pattern === \"wave\") {\n    const waveOffset = Math.sin(elapsedSeconds * 4 + enemy.id * 0.9);\n    enemy.x += (toPlayer.x * enemy.speed + waveOffset * 26) * dtSeconds;\n    enemy.y += (toPlayer.y * enemy.speed * 0.7) * dtSeconds;\n    return;\n  }\n\n  if (enemy.pattern === \"spiral\") {\n    const tangent = fromAngle(Math.atan2(toPlayer.y, toPlayer.x) + Math.PI / 2);\n    enemy.x += (toPlayer.x * enemy.speed * 0.7 + tangent.x * 34) * dtSeconds;\n    enemy.y += (toPlayer.y * enemy.speed * 0.7 + tangent.y * 34) * dtSeconds;\n    return;\n  }\n\n  enemy.x += toPlayer.x * enemy.speed * dtSeconds;\n  enemy.y += toPlayer.y * enemy.speed * dtSeconds;\n}\n\nfunction spawnRadial(enemy, spawnProjectile) {\n  const shots = 8;\n  for (let i = 0; i < shots; i += 1) {\n    const angle = (Math.PI * 2 * i) / shots;\n    const dir = fromAngle(angle);\n    spawnProjectile(enemy, dir);\n  }\n}\n\nfunction spawnSpiral(enemy, spawnProjectile) {\n  enemy.spiralAngle += Math.PI / 9;\n  const dir = fromAngle(enemy.spiralAngle);\n  spawnProjectile(enemy, dir);\n}\n\nfunction spawnAimedBurst(enemy, player, spawnProjectile) {\n  const base = Math.atan2(player.y - enemy.y, player.x - enemy.x);\n  const offsets = [-0.18, 0, 0.18];\n  for (const offset of offsets) {\n    spawnProjectile(enemy, fromAngle(base + offset));\n  }\n}\n\nfunction spawnWave(enemy, elapsedSeconds, spawnProjectile) {\n  const vertical = Math.sin(elapsedSeconds * 5 + enemy.id) * 0.4;\n  spawnProjectile(enemy, normalize({ x: 1, y: vertical }));\n  spawnProjectile(enemy, normalize({ x: -1, y: -vertical }));\n}\n\nexport function updateEnemy(enemy, dtSeconds, player, elapsedSeconds, spawnProjectile) {\n  if (!enemy.alive) {\n    return;\n  }\n\n  enemy.flashTimer = Math.max(0, enemy.flashTimer - dtSeconds);\n  enemyMovement(enemy, player, dtSeconds, elapsedSeconds);\n\n  enemy.shootTimer -= dtSeconds;\n  if (enemy.shootTimer > 0) {\n    return;\n  }\n\n  enemy.shootTimer = enemy.shootCooldown;\n\n  if (enemy.pattern === \"radial\") {\n    spawnRadial(enemy, spawnProjectile);\n    return;\n  }\n\n  if (enemy.pattern === \"spiral\") {\n    spawnSpiral(enemy, spawnProjectile);\n    return;\n  }\n\n  if (enemy.pattern === \"aimed_burst\") {\n    spawnAimedBurst(enemy, player, spawnProjectile);\n    return;\n  }\n\n  spawnWave(enemy, elapsedSeconds, spawnProjectile);\n}\n", "import { clampMagnitude, normalize } from \"../utils/vector.js\";\n\nfunction getTouchById(touchList, identifier) {\n  for (const touch of touchList) {\n    if (touch.identifier === identifier) {\n      return touch;\n    }\n  }\n  return null;\n}\n\nfunction computePadVector(touch, pad, maxRadiusPx) {\n  const rect = pad.getBoundingClientRect();\n  const cx = rect.left + rect.width / 2;\n  const cy = rect.top + rect.height / 2;\n  const offset = {\n    x: touch.clientX - cx,\n    y: touch.clientY - cy\n  };\n  const clamped = clampMagnitude(offset, maxRadiusPx);\n  return {\n    x: clamped.x / maxRadiusPx,\n    y: clamped.y / maxRadiusPx\n  };\n}\n\nfunction setKnob(knob, vector, maxRadiusPx) {\n  const px = vector.x * maxRadiusPx;\n  const py = vector.y * maxRadiusPx;\n  knob.style.transform = `translate(${px}px, ${py}px)`;\n}\n\nfunction resetKnob(knob) {\n  knob.style.transform = \"translate(0px, 0px)\";\n}\n\nexport class InputController {\n  constructor({ canvas, movePad, moveKnob, aimPad, aimKnob }) {\n    this.canvas = canvas;\n    this.movePad = movePad;\n    this.moveKnob = moveKnob;\n    this.aimPad = aimPad;\n    this.aimKnob = aimKnob;\n\n    this.keyboard = new Set();\n    this.mouseAim = { x: 0, y: -1 };\n    this.touchMove = { x: 0, y: 0 };\n    this.touchAim = { x: 0, y: 0 };\n    this.hasAim = false;\n\n    this.moveTouchId = null;\n    this.aimTouchId = null;\n    this.aimTapStart = null;\n    this.shootRequested = false;\n\n    this.playerScreenPos = { x: canvas.width / 2, y: canvas.height / 2 };\n\n    this.handleKeyDown = this.onKeyDown.bind(this);\n    this.handleKeyUp = this.onKeyUp.bind(this);\n    this.handleMouseMove = this.onMouseMove.bind(this);\n    this.handleMouseDown = this.onMouseDown.bind(this);\n\n    this.handleMoveStart = this.onMoveTouchStart.bind(this);\n    this.handleMoveMove = this.onMoveTouchMove.bind(this);\n    this.handleMoveEnd = this.onMoveTouchEnd.bind(this);\n\n    this.handleAimStart = this.onAimTouchStart.bind(this);\n    this.handleAimMove = this.onAimTouchMove.bind(this);\n    this.handleAimEnd = this.onAimTouchEnd.bind(this);\n\n    this.attach();\n  }\n\n  attach() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n    window.addEventListener(\"keyup\", this.handleKeyUp);\n    this.canvas.addEventListener(\"mousemove\", this.handleMouseMove);\n    this.canvas.addEventListener(\"mousedown\", this.handleMouseDown);\n\n    this.movePad.addEventListener(\"touchstart\", this.handleMoveStart, { passive: false });\n    this.movePad.addEventListener(\"touchmove\", this.handleMoveMove, { passive: false });\n    this.movePad.addEventListener(\"touchend\", this.handleMoveEnd, { passive: false });\n    this.movePad.addEventListener(\"touchcancel\", this.handleMoveEnd, { passive: false });\n\n    this.aimPad.addEventListener(\"touchstart\", this.handleAimStart, { passive: false });\n    this.aimPad.addEventListener(\"touchmove\", this.handleAimMove, { passive: false });\n    this.aimPad.addEventListener(\"touchend\", this.handleAimEnd, { passive: false });\n    this.aimPad.addEventListener(\"touchcancel\", this.handleAimEnd, { passive: false });\n  }\n\n  destroy() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n    window.removeEventListener(\"keyup\", this.handleKeyUp);\n    this.canvas.removeEventListener(\"mousemove\", this.handleMouseMove);\n    this.canvas.removeEventListener(\"mousedown\", this.handleMouseDown);\n\n    this.movePad.removeEventListener(\"touchstart\", this.handleMoveStart);\n    this.movePad.removeEventListener(\"touchmove\", this.handleMoveMove);\n    this.movePad.removeEventListener(\"touchend\", this.handleMoveEnd);\n    this.movePad.removeEventListener(\"touchcancel\", this.handleMoveEnd);\n\n    this.aimPad.removeEventListener(\"touchstart\", this.handleAimStart);\n    this.aimPad.removeEventListener(\"touchmove\", this.handleAimMove);\n    this.aimPad.removeEventListener(\"touchend\", this.handleAimEnd);\n    this.aimPad.removeEventListener(\"touchcancel\", this.handleAimEnd);\n  }\n\n  onKeyDown(event) {\n    const key = event.key.toLowerCase();\n    this.keyboard.add(key);\n    if (key === \" \") {\n      event.preventDefault();\n      this.shootRequested = true;\n    }\n  }\n\n  onKeyUp(event) {\n    this.keyboard.delete(event.key.toLowerCase());\n  }\n\n  onMouseMove(event) {\n    const rect = this.canvas.getBoundingClientRect();\n    const cursor = {\n      x: (event.clientX - rect.left) * (this.canvas.width / rect.width),\n      y: (event.clientY - rect.top) * (this.canvas.height / rect.height)\n    };\n    this.mouseAim = normalize({\n      x: cursor.x - this.playerScreenPos.x,\n      y: cursor.y - this.playerScreenPos.y\n    });\n    if (this.mouseAim.x || this.mouseAim.y) {\n      this.hasAim = true;\n    }\n  }\n\n  onMouseDown() {\n    this.shootRequested = true;\n  }\n\n  onMoveTouchStart(event) {\n    if (this.moveTouchId !== null) {\n      return;\n    }\n    const touch = event.changedTouches[0];\n    this.moveTouchId = touch.identifier;\n    this.onMoveTouchMove(event);\n  }\n\n  onMoveTouchMove(event) {\n    if (this.moveTouchId === null) {\n      return;\n    }\n    event.preventDefault();\n    const touch = getTouchById(event.touches, this.moveTouchId);\n    if (!touch) {\n      return;\n    }\n\n    const radius = this.movePad.clientWidth * 0.34;\n    this.touchMove = computePadVector(touch, this.movePad, radius);\n    setKnob(this.moveKnob, this.touchMove, radius);\n  }\n\n  onMoveTouchEnd(event) {\n    if (this.moveTouchId === null) {\n      return;\n    }\n    const ended = getTouchById(event.changedTouches, this.moveTouchId);\n    if (!ended) {\n      return;\n    }\n    this.moveTouchId = null;\n    this.touchMove = { x: 0, y: 0 };\n    resetKnob(this.moveKnob);\n  }\n\n  onAimTouchStart(event) {\n    if (this.aimTouchId !== null) {\n      return;\n    }\n    const touch = event.changedTouches[0];\n    this.aimTouchId = touch.identifier;\n    this.aimTapStart = { x: touch.clientX, y: touch.clientY };\n  }\n\n  onAimTouchMove(event) {\n    if (this.aimTouchId === null) {\n      return;\n    }\n    event.preventDefault();\n    const touch = getTouchById(event.touches, this.aimTouchId);\n    if (!touch) {\n      return;\n    }\n\n    const radius = this.aimPad.clientWidth * 0.34;\n    this.touchAim = computePadVector(touch, this.aimPad, radius);\n    const normalAim = normalize(this.touchAim);\n    if (normalAim.x || normalAim.y) {\n      this.touchAim = normalAim;\n      this.hasAim = true;\n    }\n    setKnob(this.aimKnob, this.touchAim, radius);\n  }\n\n  onAimTouchEnd(event) {\n    if (this.aimTouchId === null) {\n      return;\n    }\n    const touch = getTouchById(event.changedTouches, this.aimTouchId);\n    if (!touch) {\n      return;\n    }\n\n    const movedDistance = this.aimTapStart\n      ? Math.hypot(touch.clientX - this.aimTapStart.x, touch.clientY - this.aimTapStart.y)\n      : 0;\n\n    if (movedDistance < 14) {\n      this.shootRequested = true;\n    }\n\n    this.aimTouchId = null;\n    this.aimTapStart = null;\n    resetKnob(this.aimKnob);\n  }\n\n  setPlayerScreenPosition(x, y) {\n    this.playerScreenPos = { x, y };\n  }\n\n  getMovementVector() {\n    if (this.moveTouchId !== null) {\n      return normalize(this.touchMove);\n    }\n\n    const x = (this.keyboard.has(\"d\") || this.keyboard.has(\"arrowright\") ? 1 : 0) - (this.keyboard.has(\"a\") || this.keyboard.has(\"arrowleft\") ? 1 : 0);\n    const y = (this.keyboard.has(\"s\") || this.keyboard.has(\"arrowdown\") ? 1 : 0) - (this.keyboard.has(\"w\") || this.keyboard.has(\"arrowup\") ? 1 : 0);\n    return normalize({ x, y });\n  }\n\n  getAimVector() {\n    if (this.aimTouchId !== null || (this.touchAim.x || this.touchAim.y)) {\n      return normalize(this.touchAim);\n    }\n    if (this.hasAim) {\n      return normalize(this.mouseAim);\n    }\n    return { x: 0, y: 0 };\n  }\n\n  consumeShootRequested() {\n    if (!this.shootRequested) {\n      return false;\n    }\n    this.shootRequested = false;\n    return true;\n  }\n}\n", "import { LIMITS } from \"../config.js\";\n\nexport function createLevelRuntime(level) {\n  return {\n    elapsedSeconds: 0,\n    spawnAccumulator: 0,\n    completed: false,\n    completionAnnounced: false,\n    level\n  };\n}\n\nfunction getActiveWave(level, elapsedSeconds) {\n  return level.waves.find((wave) => elapsedSeconds >= wave.start && elapsedSeconds < wave.end) ?? level.waves[level.waves.length - 1];\n}\n\nexport function updateLevel(runtime, state, dtSeconds, spawnEnemy) {\n  if (runtime.completed) {\n    return;\n  }\n\n  runtime.elapsedSeconds += dtSeconds;\n  runtime.spawnAccumulator += dtSeconds;\n\n  const wave = getActiveWave(runtime.level, runtime.elapsedSeconds);\n  const spawnEvery = runtime.level.spawnIntervalSeconds * (wave.spawnMultiplier ?? 1);\n\n  while (runtime.spawnAccumulator >= spawnEvery) {\n    runtime.spawnAccumulator -= spawnEvery;\n\n    if (state.enemies.length >= LIMITS.MAX_ENEMIES) {\n      break;\n    }\n\n    spawnEnemy(wave.type, wave.pattern, runtime.level.difficulty);\n  }\n\n  if (runtime.elapsedSeconds >= runtime.level.durationSeconds) {\n    runtime.completed = true;\n  }\n}\n", "import { TUNING, WORLD } from \"../config.js\";\nimport { normalize } from \"../utils/vector.js\";\n\nexport function createPlayer(character, weapon) {\n  const stats = structuredClone(character.stats);\n  return {\n    id: character.id,\n    name: character.name,\n    baseStats: stats,\n    x: WORLD.PLAYER_SPAWN_X,\n    y: WORLD.PLAYER_SPAWN_Y,\n    prevX: WORLD.PLAYER_SPAWN_X,\n    prevY: WORLD.PLAYER_SPAWN_Y,\n    health: stats.maxHealth,\n    maxHealth: stats.maxHealth,\n    healthRegen: stats.healthRegen,\n    speed: stats.speed,\n    baseDamage: stats.baseDamage,\n    cooldownMs: stats.cooldownMs,\n    size: stats.size,\n    armorPercent: stats.armorPercent,\n    invulnerableMs: 0,\n    shootCooldownMs: 0,\n    aimDir: { x: 0, y: -1 },\n    weapon,\n    pickupRadius: TUNING.COIN_PICKUP_BASE_RADIUS,\n    damageMultiplier: 1,\n    projectileSpeedMultiplier: 1,\n    fireRateMultiplier: 1\n  };\n}\n\nexport function savePlayerPreviousPosition(player) {\n  player.prevX = player.x;\n  player.prevY = player.y;\n}\n\nexport function setPlayerAim(player, aimVec) {\n  const normalized = normalize(aimVec);\n  if (normalized.x || normalized.y) {\n    player.aimDir = normalized;\n  }\n}\n\nexport function updatePlayer(player, moveVec, dtSeconds, world = WORLD) {\n  const move = normalize(moveVec);\n  player.x += move.x * player.speed * dtSeconds;\n  player.y += move.y * player.speed * dtSeconds;\n\n  const minX = player.size;\n  const maxX = world.WIDTH - player.size;\n  const minY = player.size;\n  const maxY = world.HEIGHT - player.size;\n\n  player.x = Math.min(maxX, Math.max(minX, player.x));\n  player.y = Math.min(maxY, Math.max(minY, player.y));\n\n  player.health = Math.min(player.maxHealth, player.health + player.healthRegen * dtSeconds);\n  player.shootCooldownMs = Math.max(0, player.shootCooldownMs - dtSeconds * 1000);\n  player.invulnerableMs = Math.max(0, player.invulnerableMs - dtSeconds * 1000);\n}\n\nexport function canPlayerShoot(player) {\n  return player.shootCooldownMs <= 0;\n}\n\nexport function consumePlayerShot(player) {\n  if (!canPlayerShoot(player)) {\n    return false;\n  }\n  player.shootCooldownMs = player.cooldownMs / player.fireRateMultiplier;\n  return true;\n}\n\nexport function takePlayerDamage(player, rawDamage) {\n  if (player.invulnerableMs > 0) {\n    return 0;\n  }\n\n  const clampedArmor = Math.min(0.85, Math.max(0, player.armorPercent));\n  const actualDamage = rawDamage * (1 - clampedArmor);\n  player.health = Math.max(0, player.health - actualDamage);\n  player.invulnerableMs = TUNING.PLAYER_INVULN_MS_ON_HIT;\n  return actualDamage;\n}\n\nexport function healPlayer(player, amount) {\n  player.health = Math.min(player.maxHealth, player.health + amount);\n}\n\nfunction applyModifier(player, item, level) {\n  if (!level || !item.effect) {\n    return;\n  }\n\n  const { stat, mode, perLevel } = item.effect;\n  if (mode === \"add\") {\n    player[stat] += perLevel * level;\n    return;\n  }\n\n  if (mode === \"mult\") {\n    player[stat] *= 1 + perLevel * level;\n  }\n}\n\nexport function applyUpgradeLevels(player, ownedLevels, itemsById) {\n  player.maxHealth = player.baseStats.maxHealth;\n  player.healthRegen = player.baseStats.healthRegen;\n  player.speed = player.baseStats.speed;\n  player.baseDamage = player.baseStats.baseDamage;\n  player.cooldownMs = player.baseStats.cooldownMs;\n  player.size = player.baseStats.size;\n  player.armorPercent = player.baseStats.armorPercent;\n  player.pickupRadius = TUNING.COIN_PICKUP_BASE_RADIUS;\n  player.damageMultiplier = 1;\n  player.projectileSpeedMultiplier = 1;\n  player.fireRateMultiplier = 1;\n\n  for (const [itemId, level] of Object.entries(ownedLevels)) {\n    const item = itemsById[itemId];\n    if (!item) {\n      continue;\n    }\n\n    if (item.effect?.stat === \"pickupRadius\") {\n      player.pickupRadius += item.effect.perLevel * level;\n      continue;\n    }\n\n    if (item.effect?.stat === \"damageMultiplier\") {\n      player.damageMultiplier *= 1 + item.effect.perLevel * level;\n      continue;\n    }\n\n    if (item.effect?.stat === \"projectileSpeedMultiplier\") {\n      player.projectileSpeedMultiplier *= 1 + item.effect.perLevel * level;\n      continue;\n    }\n\n    if (item.effect?.stat === \"fireRateMultiplier\") {\n      player.fireRateMultiplier *= 1 + item.effect.perLevel * level;\n      continue;\n    }\n\n    applyModifier(player, item, level);\n  }\n\n  if (player.health > player.maxHealth) {\n    player.health = player.maxHealth;\n  }\n}\n\nexport function setPlayerWeapon(player, weapon) {\n  player.weapon = weapon;\n}\n", "import { LIMITS, SIZES, WORLD } from \"../config.js\";\n\nexport function createProjectilePool(max = LIMITS.MAX_PROJECTILES) {\n  return {\n    items: Array.from({ length: max }, () => ({ active: false })),\n    nextIndex: 0\n  };\n}\n\nexport function spawnProjectile(pool, spec) {\n  const { items } = pool;\n  for (let attempt = 0; attempt < items.length; attempt += 1) {\n    const index = (pool.nextIndex + attempt) % items.length;\n    const projectile = items[index];\n    if (projectile.active) {\n      continue;\n    }\n\n    projectile.active = true;\n    projectile.x = spec.x;\n    projectile.y = spec.y;\n    projectile.prevX = spec.x;\n    projectile.prevY = spec.y;\n    projectile.vx = spec.vx;\n    projectile.vy = spec.vy;\n    projectile.size = spec.size ?? SIZES.PROJECTILE;\n    projectile.damage = spec.damage ?? 1;\n    projectile.owner = spec.owner ?? \"player\";\n    projectile.ttl = spec.ttl ?? 2.5;\n    projectile.pierceLeft = spec.pierceLeft ?? 0;\n    projectile.special = spec.special ?? \"none\";\n    projectile.explosionRadius = spec.explosionRadius ?? 0;\n\n    pool.nextIndex = (index + 1) % items.length;\n    return projectile;\n  }\n\n  return null;\n}\n\nexport function deactivateProjectile(projectile) {\n  projectile.active = false;\n}\n\nexport function forEachActiveProjectile(pool, callback) {\n  for (const projectile of pool.items) {\n    if (!projectile.active) {\n      continue;\n    }\n    callback(projectile);\n  }\n}\n\nexport function updateProjectiles(pool, dtSeconds, world = WORLD) {\n  forEachActiveProjectile(pool, (projectile) => {\n    projectile.prevX = projectile.x;\n    projectile.prevY = projectile.y;\n    projectile.x += projectile.vx * dtSeconds;\n    projectile.y += projectile.vy * dtSeconds;\n    projectile.ttl -= dtSeconds;\n\n    if (\n      projectile.ttl <= 0 ||\n      projectile.x < -32 ||\n      projectile.y < -32 ||\n      projectile.x > world.WIDTH + 32 ||\n      projectile.y > world.HEIGHT + 32\n    ) {\n      deactivateProjectile(projectile);\n    }\n  });\n}\n\nexport function aabbOverlap(a, b) {\n  return (\n    a.x - a.size < b.x + b.size &&\n    a.x + a.size > b.x - b.size &&\n    a.y - a.size < b.y + b.size &&\n    a.y + a.size > b.y - b.size\n  );\n}\n\nexport function checkProjectileEnemyCollisions(pool, enemies, onHitEnemy, onEnemyKilled) {\n  forEachActiveProjectile(pool, (projectile) => {\n    if (projectile.owner !== \"player\") {\n      return;\n    }\n\n    for (const enemy of enemies) {\n      if (!enemy.alive) {\n        continue;\n      }\n      if (!aabbOverlap(projectile, enemy)) {\n        continue;\n      }\n\n      enemy.health -= projectile.damage;\n      enemy.flashTimer = enemy.flashDuration;\n      onHitEnemy?.(enemy, projectile);\n\n      if (enemy.health <= 0) {\n        enemy.alive = false;\n        onEnemyKilled?.(enemy, projectile);\n      }\n\n      if (projectile.special === \"explosive\" && projectile.explosionRadius > 0) {\n        for (const nearby of enemies) {\n          if (!nearby.alive || nearby === enemy) {\n            continue;\n          }\n          const dx = nearby.x - enemy.x;\n          const dy = nearby.y - enemy.y;\n          const distance = Math.hypot(dx, dy);\n          if (distance <= projectile.explosionRadius) {\n            nearby.health -= projectile.damage * 0.4;\n            nearby.flashTimer = nearby.flashDuration;\n            if (nearby.health <= 0) {\n              nearby.alive = false;\n              onEnemyKilled?.(nearby, projectile);\n            }\n          }\n        }\n      }\n\n      if (projectile.pierceLeft > 0) {\n        projectile.pierceLeft -= 1;\n      } else {\n        deactivateProjectile(projectile);\n      }\n      break;\n    }\n  });\n}\n\nexport function checkProjectilePlayerCollisions(pool, player, onPlayerHit) {\n  forEachActiveProjectile(pool, (projectile) => {\n    if (projectile.owner !== \"enemy\") {\n      return;\n    }\n\n    if (!aabbOverlap(projectile, player)) {\n      return;\n    }\n\n    onPlayerHit?.(projectile);\n    deactivateProjectile(projectile);\n  });\n}\n\nexport function checkPlayerEnemyCollision(player, enemies) {\n  for (const enemy of enemies) {\n    if (!enemy.alive) {\n      continue;\n    }\n\n    if (aabbOverlap(player, enemy)) {\n      return enemy;\n    }\n  }\n\n  return null;\n}\n", "import { COLORS, SIZES } from \"../config.js\";\nimport { lerp } from \"../utils/vector.js\";\n\nfunction interpolateEntity(entity, alpha) {\n  return {\n    x: lerp(entity.prevX ?? entity.x, entity.x, alpha),\n    y: lerp(entity.prevY ?? entity.y, entity.y, alpha)\n  };\n}\n\nexport function renderGame(ctx, canvas, state, alpha) {\n  const { width, height } = canvas;\n  ctx.clearRect(0, 0, width, height);\n\n  ctx.fillStyle = state.level.backgroundColor;\n  ctx.fillRect(0, 0, width, height);\n\n  renderCoins(ctx, state, alpha);\n  renderProjectiles(ctx, state, alpha);\n  renderEnemies(ctx, state, alpha);\n  renderPlayer(ctx, state, alpha);\n}\n\nfunction renderPlayer(ctx, state, alpha) {\n  const player = state.player;\n  const pos = interpolateEntity(player, alpha);\n\n  ctx.save();\n  ctx.fillStyle = COLORS.PLAYER;\n  ctx.beginPath();\n  ctx.arc(pos.x, pos.y, player.size, 0, Math.PI * 2);\n  ctx.fill();\n\n  ctx.fillStyle = COLORS.PLAYER_CORE;\n  ctx.beginPath();\n  ctx.arc(pos.x, pos.y, Math.max(4, player.size * 0.38), 0, Math.PI * 2);\n  ctx.fill();\n\n  const aim = state.aimDir;\n  const length = player.size + 28;\n  ctx.strokeStyle = COLORS.AIM;\n  ctx.lineWidth = 3;\n  ctx.beginPath();\n  ctx.moveTo(pos.x, pos.y);\n  ctx.lineTo(pos.x + aim.x * length, pos.y + aim.y * length);\n  ctx.stroke();\n  ctx.restore();\n}\n\nfunction renderEnemies(ctx, state, alpha) {\n  for (const enemy of state.enemies) {\n    if (!enemy.alive) {\n      continue;\n    }\n    const pos = interpolateEntity(enemy, alpha);\n    ctx.save();\n    ctx.fillStyle = enemy.flashTimer > 0 ? COLORS.ENEMY_FLASH : COLORS.ENEMY;\n    ctx.fillRect(pos.x - enemy.size, pos.y - enemy.size, enemy.size * 2, enemy.size * 2);\n    ctx.restore();\n  }\n}\n\nfunction renderProjectiles(ctx, state, alpha) {\n  for (const projectile of state.projectiles.items) {\n    if (!projectile.active) {\n      continue;\n    }\n\n    const x = lerp(projectile.prevX ?? projectile.x, projectile.x, alpha);\n    const y = lerp(projectile.prevY ?? projectile.y, projectile.y, alpha);\n\n    ctx.save();\n    ctx.fillStyle = projectile.owner === \"enemy\" ? COLORS.ENEMY_PROJECTILE : COLORS.PLAYER_PROJECTILE;\n    const size = projectile.owner === \"enemy\" ? SIZES.ENEMY_PROJECTILE : projectile.size;\n    ctx.beginPath();\n    ctx.arc(x, y, size, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.restore();\n  }\n}\n\nfunction renderCoins(ctx, state, alpha) {\n  for (const coin of state.coins) {\n    if (!coin.active) {\n      continue;\n    }\n\n    const x = lerp(coin.prevX ?? coin.x, coin.x, alpha);\n    const y = lerp(coin.prevY ?? coin.y, coin.y, alpha);\n\n    ctx.save();\n    ctx.fillStyle = COLORS.COIN;\n    ctx.strokeStyle = COLORS.COIN_STROKE;\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.arc(x, y, coin.size ?? SIZES.COIN, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.stroke();\n    ctx.restore();\n  }\n}\n", "const DEFAULT_STATE = {\n  coins: 0,\n  ownedLevels: {}\n};\n\nfunction cloneState(state) {\n  return {\n    ...state,\n    ownedLevels: { ...(state.ownedLevels ?? {}) }\n  };\n}\n\nexport class Shop {\n  constructor({ storage, storageKey = \"shop\", catalog }) {\n    this.storage = storage;\n    this.storageKey = storageKey;\n    this.catalog = new Map(catalog.map((item) => [item.id, item]));\n    this.state = cloneState(DEFAULT_STATE);\n  }\n\n  async init(seedState = DEFAULT_STATE) {\n    const stored = await this.storage.get(this.storageKey);\n    this.state = cloneState({\n      ...DEFAULT_STATE,\n      ...seedState,\n      ...(stored ?? {})\n    });\n\n    if (!this.state.ownedLevels) {\n      this.state.ownedLevels = {};\n    }\n\n    return this.getSnapshot();\n  }\n\n  getSnapshot() {\n    return cloneState(this.state);\n  }\n\n  getLevel(itemId) {\n    return this.state.ownedLevels[itemId] ?? 0;\n  }\n\n  getCoins() {\n    return this.state.coins;\n  }\n\n  setCoins(coins) {\n    this.state.coins = Math.max(0, Math.floor(coins));\n  }\n\n  addCoins(delta) {\n    this.setCoins(this.state.coins + delta);\n  }\n\n  getItem(itemId) {\n    return this.catalog.get(itemId) ?? null;\n  }\n\n  getNextCost(itemId) {\n    const item = this.getItem(itemId);\n    if (!item) {\n      return Infinity;\n    }\n\n    const level = this.getLevel(itemId);\n    if (level >= item.maxLevel) {\n      return null;\n    }\n\n    return item.costs[level];\n  }\n\n  canAfford(itemId) {\n    const nextCost = this.getNextCost(itemId);\n    if (nextCost === null) {\n      return false;\n    }\n    return this.state.coins >= nextCost;\n  }\n\n  async persist() {\n    await this.storage.set(this.storageKey, this.getSnapshot());\n  }\n\n  async buy(itemId) {\n    const item = this.getItem(itemId);\n    if (!item) {\n      return { ok: false, reason: \"MAX_LEVEL\" };\n    }\n\n    const currentLevel = this.getLevel(itemId);\n\n    if (currentLevel >= item.maxLevel) {\n      return { ok: false, reason: \"MAX_LEVEL\" };\n    }\n\n    const nextCost = item.costs[currentLevel];\n    if (this.state.coins < nextCost) {\n      return { ok: false, reason: \"INSUFFICIENT_COINS\" };\n    }\n\n    this.state.coins -= nextCost;\n    this.state.ownedLevels[itemId] = currentLevel + 1;\n    await this.persist();\n\n    return {\n      ok: true,\n      itemId,\n      level: this.state.ownedLevels[itemId],\n      coins: this.state.coins,\n      spent: nextCost\n    };\n  }\n}\n", "function el(id) {\n  const node = document.getElementById(id);\n  if (!node) {\n    throw new Error(`Missing DOM element: ${id}`);\n  }\n  return node;\n}\n\nexport function createUI({ onToggleShop, onCloseShop, onBuy, onToggleSfx, onApplyUpdate, onDismissHint }) {\n  const refs = {\n    healthText: el(\"healthText\"),\n    scoreText: el(\"scoreText\"),\n    coinsText: el(\"coinsText\"),\n    bankCoinsText: el(\"bankCoinsText\"),\n    shopToggle: el(\"shopToggle\"),\n    shopClose: el(\"shopClose\"),\n    shopPanel: el(\"shopPanel\"),\n    shopItems: el(\"shopItems\"),\n    toastArea: el(\"toastArea\"),\n    hintOverlay: el(\"hintOverlay\"),\n    hintDismiss: el(\"hintDismiss\"),\n    updateBanner: el(\"updateBanner\"),\n    updateButton: el(\"updateButton\"),\n    sfxToggle: el(\"sfxToggle\")\n  };\n\n  refs.shopToggle.addEventListener(\"click\", onToggleShop);\n  refs.shopClose.addEventListener(\"click\", onCloseShop);\n  refs.hintDismiss.addEventListener(\"click\", onDismissHint);\n  refs.updateButton.addEventListener(\"click\", onApplyUpdate);\n  refs.sfxToggle.addEventListener(\"change\", (event) => onToggleSfx(event.target.checked));\n\n  function renderHud({ health, maxHealth, score, runCoins, bankCoins }) {\n    refs.healthText.textContent = `HP: ${Math.ceil(health)}/${Math.ceil(maxHealth)}`;\n    refs.scoreText.textContent = `Score: ${Math.floor(score)}`;\n    refs.coinsText.textContent = `Run Coins: ${runCoins}`;\n    refs.bankCoinsText.textContent = `Bank Coins: ${bankCoins}`;\n  }\n\n  function setShopOpen(isOpen) {\n    refs.shopPanel.classList.toggle(\"hidden\", !isOpen);\n  }\n\n  function showHint(show) {\n    refs.hintOverlay.classList.toggle(\"hidden\", !show);\n  }\n\n  function showUpdateBanner(show) {\n    refs.updateBanner.classList.toggle(\"hidden\", !show);\n  }\n\n  function setSfxEnabled(enabled) {\n    refs.sfxToggle.checked = Boolean(enabled);\n  }\n\n  function showToast(message, type = \"info\", ttlMs = 1600) {\n    const node = document.createElement(\"div\");\n    node.className = `toast ${type}`;\n    node.textContent = message;\n    refs.toastArea.appendChild(node);\n\n    window.setTimeout(() => {\n      node.remove();\n    }, ttlMs);\n  }\n\n  function renderShopEntries(entries, bankCoins) {\n    refs.shopItems.innerHTML = \"\";\n\n    for (const entry of entries) {\n      const card = document.createElement(\"article\");\n      card.className = \"shop-item\";\n\n      const title = document.createElement(\"strong\");\n      title.textContent = `${entry.name} (${entry.kind})`;\n      card.appendChild(title);\n\n      const meta = document.createElement(\"div\");\n      meta.className = \"meta\";\n      meta.innerHTML = `<span>${entry.description}</span><span>Level ${entry.level}/${entry.maxLevel}</span>`;\n      card.appendChild(meta);\n\n      const row = document.createElement(\"div\");\n      row.className = \"row\";\n      const costText = entry.nextCost === null ? \"MAX\" : `Cost: ${entry.nextCost}`;\n\n      const cost = document.createElement(\"span\");\n      cost.textContent = costText;\n      row.appendChild(cost);\n\n      const button = document.createElement(\"button\");\n      button.type = \"button\";\n      button.textContent = entry.nextCost === null ? \"Max\" : \"Buy\";\n      const disabled = !entry.unlocked || entry.nextCost === null || bankCoins < entry.nextCost;\n      button.disabled = disabled;\n      if (!entry.unlocked) {\n        button.title = `Unlock: ${entry.unlockText}`;\n      }\n      button.addEventListener(\"click\", () => onBuy(entry.id));\n      row.appendChild(button);\n\n      card.appendChild(row);\n      refs.shopItems.appendChild(card);\n    }\n  }\n\n  return {\n    renderHud,\n    setShopOpen,\n    showHint,\n    showToast,\n    renderShopEntries,\n    setSfxEnabled,\n    showUpdateBanner\n  };\n}\n", "export class StorageAdapter {\n  async get(_key) {\n    throw new Error(\"StorageAdapter.get must be implemented\");\n  }\n\n  async set(_key, _value) {\n    throw new Error(\"StorageAdapter.set must be implemented\");\n  }\n\n  async remove(_key) {\n    throw new Error(\"StorageAdapter.remove must be implemented\");\n  }\n\n  async clear() {\n    throw new Error(\"StorageAdapter.clear must be implemented\");\n  }\n\n  async keys() {\n    throw new Error(\"StorageAdapter.keys must be implemented\");\n  }\n}\n", "import { StorageAdapter } from \"./storageAdapter.js\";\n\nexport class LocalStorageAdapter extends StorageAdapter {\n  constructor(prefix = \"survivor\") {\n    super();\n    this.prefix = prefix;\n  }\n\n  makeKey(key) {\n    return `${this.prefix}:${key}`;\n  }\n\n  async get(key) {\n    const raw = localStorage.getItem(this.makeKey(key));\n    if (raw === null) {\n      return null;\n    }\n    return JSON.parse(raw);\n  }\n\n  async set(key, value) {\n    localStorage.setItem(this.makeKey(key), JSON.stringify(value));\n  }\n\n  async remove(key) {\n    localStorage.removeItem(this.makeKey(key));\n  }\n\n  async clear() {\n    const keys = await this.keys();\n    for (const key of keys) {\n      localStorage.removeItem(this.makeKey(key));\n    }\n  }\n\n  async keys() {\n    const out = [];\n    for (let i = 0; i < localStorage.length; i += 1) {\n      const full = localStorage.key(i);\n      if (!full || !full.startsWith(`${this.prefix}:`)) {\n        continue;\n      }\n      out.push(full.slice(this.prefix.length + 1));\n    }\n    return out;\n  }\n}\n", "import {\n  COLORS,\n  DEFAULT_PROFILE,\n  DEFAULT_SETTINGS,\n  STORAGE_KEYS,\n  SIZES,\n  TUNING,\n  WEAPONS,\n  WEAPONS_BY_ID,\n  WORLD\n} from \"./config.js\";\nimport { createDefaultSfx } from \"./audio/sfx.js\";\nimport { CHARACTERS, CHARACTERS_BY_ID } from \"./data/characters.js\";\nimport { ITEMS, ITEMS_BY_ID } from \"./data/items.js\";\nimport { LEVELS } from \"./data/levels.js\";\nimport { Engine } from \"./game/engine.js\";\nimport { createEnemy, saveEnemyPrevious, updateEnemy } from \"./game/enemy.js\";\nimport { InputController } from \"./game/input.js\";\nimport { createLevelRuntime, updateLevel } from \"./game/level.js\";\nimport {\n  applyUpgradeLevels,\n  consumePlayerShot,\n  createPlayer,\n  savePlayerPreviousPosition,\n  setPlayerAim,\n  setPlayerWeapon,\n  takePlayerDamage,\n  updatePlayer\n} from \"./game/player.js\";\nimport {\n  checkPlayerEnemyCollision,\n  checkProjectileEnemyCollisions,\n  checkProjectilePlayerCollisions,\n  createProjectilePool,\n  spawnProjectile,\n  updateProjectiles\n} from \"./game/projectile.js\";\nimport { renderGame } from \"./game/render.js\";\nimport { Shop } from \"./game/shop.js\";\nimport { createUI } from \"./game/ui.js\";\nimport { LocalStorageAdapter } from \"./storage/localStorageAdapter.js\";\nimport { fromAngle, normalize } from \"./utils/vector.js\";\n\nconst storage = new LocalStorageAdapter(\"survivor\");\nconst sfx = createDefaultSfx();\n\nconst canvas = document.getElementById(\"gameCanvas\");\nconst ctx = canvas.getContext(\"2d\");\nconst movePad = document.getElementById(\"movePad\");\nconst moveKnob = document.getElementById(\"moveKnob\");\nconst aimPad = document.getElementById(\"aimPad\");\nconst aimKnob = document.getElementById(\"aimKnob\");\n\ncanvas.width = WORLD.WIDTH;\ncanvas.height = WORLD.HEIGHT;\nctx.imageSmoothingEnabled = false;\nctx.fillStyle = COLORS.HUD_TEXT;\n\nconst catalog = buildShopCatalog();\nconst shop = new Shop({\n  storage,\n  storageKey: \"shop\",\n  catalog\n});\n\nlet swRegistration = null;\nlet waitingWorker = null;\nlet swReloaded = false;\nlet shopOpen = false;\nlet saveQueued = false;\nconst announcedUnlockables = new Set();\n\nconst ui = createUI({\n  onToggleShop: () => {\n    shopOpen = !shopOpen;\n    ui.setShopOpen(shopOpen);\n    renderShop();\n  },\n  onCloseShop: () => {\n    shopOpen = false;\n    ui.setShopOpen(false);\n  },\n  onBuy: async (itemId) => {\n    const item = catalog.find((entry) => entry.id === itemId);\n    if (!item) {\n      return;\n    }\n\n    if (!unlockConditionMet(item.unlockCondition, profile)) {\n      ui.showToast(`Locked: ${describeUnlock(item.unlockCondition)}`, \"error\");\n      return;\n    }\n\n    const result = await shop.buy(itemId);\n    if (!result.ok) {\n      const reason = result.reason === \"MAX_LEVEL\" ? \"Item already maxed\" : \"Not enough coins\";\n      ui.showToast(reason, \"error\");\n      return;\n    }\n\n    onCatalogPurchase(itemId);\n    sfx.play(\"shopBuy\");\n    ui.showToast(`Purchased ${item.name}`, \"success\");\n    applyOwnedLevelsToPlayer();\n    renderHud();\n    renderShop();\n    queueSave();\n  },\n  onToggleSfx: async (enabled) => {\n    settings.sfxEnabled = enabled;\n    sfx.setEnabled(enabled);\n    await storage.set(STORAGE_KEYS.SETTINGS, settings);\n  },\n  onApplyUpdate: () => {\n    const target = waitingWorker ?? swRegistration?.waiting;\n    if (!target) {\n      return;\n    }\n    target.postMessage({ type: \"SKIP_WAITING\" });\n  },\n  onDismissHint: async () => {\n    ui.showHint(false);\n    hintSeen = true;\n    await storage.set(STORAGE_KEYS.HINT_SEEN, true);\n  }\n});\n\nconst input = new InputController({\n  canvas,\n  movePad,\n  moveKnob,\n  aimPad,\n  aimKnob\n});\n\nconst engine = new Engine({\n  update: tick,\n  render: (alpha) => renderGame(ctx, canvas, state, alpha)\n});\n\nlet profile = structuredClone(DEFAULT_PROFILE);\nlet settings = structuredClone(DEFAULT_SETTINGS);\nlet hintSeen = false;\n\nconst state = {\n  levelIndex: 0,\n  level: LEVELS[0],\n  levelRuntime: createLevelRuntime(LEVELS[0]),\n  player: null,\n  enemies: [],\n  coins: [],\n  projectiles: createProjectilePool(),\n  score: 0,\n  runCoins: 0,\n  elapsedSeconds: 0,\n  gameOver: false,\n  gameWon: false,\n  enemyIdSeed: 0,\n  coinIdSeed: 0,\n  aimDir: { x: 0, y: -1 },\n  moveDir: { x: 0, y: 0 },\n  hasExplicitAim: false\n};\n\nawait bootstrap();\n\nasync function bootstrap() {\n  await loadPersistence();\n  await initShop();\n\n  sfx.setEnabled(settings.sfxEnabled);\n  ui.setSfxEnabled(settings.sfxEnabled);\n  ui.showHint(!hintSeen);\n\n  startRun(true);\n  renderShop();\n  renderHud();\n  engine.start();\n\n  registerServiceWorker();\n}\n\nasync function loadPersistence() {\n  const [storedProfile, storedSettings, storedHintSeen] = await Promise.all([\n    storage.get(STORAGE_KEYS.PROFILE),\n    storage.get(STORAGE_KEYS.SETTINGS),\n    storage.get(STORAGE_KEYS.HINT_SEEN)\n  ]);\n\n  profile = {\n    ...structuredClone(DEFAULT_PROFILE),\n    ...(storedProfile ?? {})\n  };\n  profile.levelsCompleted = Array.isArray(profile.levelsCompleted) ? profile.levelsCompleted : [];\n  profile.perLevelBest = { ...(profile.perLevelBest ?? {}) };\n  profile.ownedLevels = { ...(profile.ownedLevels ?? {}) };\n  profile.unlockedCharacters = unique([\"runner\", ...(profile.unlockedCharacters ?? [])]);\n  profile.unlockedWeapons = unique([\"pulse\", ...(profile.unlockedWeapons ?? [])]);\n\n  settings = {\n    ...structuredClone(DEFAULT_SETTINGS),\n    ...(storedSettings ?? {})\n  };\n\n  hintSeen = Boolean(storedHintSeen);\n\n  sanitizeProfileSelections();\n}\n\nasync function initShop() {\n  const seeded = {\n    coins: profile.bankCoins,\n    ownedLevels: {\n      ...profile.ownedLevels,\n      ...seedPurchasedUnlocks(profile)\n    }\n  };\n\n  const snapshot = await shop.init(seeded);\n  profile.bankCoins = snapshot.coins;\n  profile.ownedLevels = { ...snapshot.ownedLevels };\n}\n\nfunction sanitizeProfileSelections() {\n  if (!profile.unlockedCharacters.includes(profile.selectedCharacterId)) {\n    profile.selectedCharacterId = profile.unlockedCharacters[0] ?? \"runner\";\n  }\n\n  if (!profile.unlockedWeapons.includes(profile.selectedWeaponId)) {\n    profile.selectedWeaponId = profile.unlockedWeapons[0] ?? \"pulse\";\n  }\n}\n\nfunction unique(items) {\n  return [...new Set(items)];\n}\n\nfunction seedPurchasedUnlocks(sourceProfile) {\n  const seeded = {};\n  for (const id of sourceProfile.unlockedCharacters) {\n    if (id !== \"runner\") {\n      seeded[`character:${id}`] = 1;\n    }\n  }\n  for (const id of sourceProfile.unlockedWeapons) {\n    if (id !== \"pulse\") {\n      seeded[`weapon:${id}`] = 1;\n    }\n  }\n  return seeded;\n}\n\nfunction getCurrentCharacter() {\n  return CHARACTERS_BY_ID[profile.selectedCharacterId] ?? CHARACTERS[0];\n}\n\nfunction getCurrentWeapon(character) {\n  const preferredWeapon = WEAPONS_BY_ID[profile.selectedWeaponId];\n  if (preferredWeapon && profile.unlockedWeapons.includes(preferredWeapon.id)) {\n    return preferredWeapon;\n  }\n\n  const fallback = WEAPONS_BY_ID[character.startingWeaponId] ?? WEAPONS_BY_ID.pulse;\n  if (profile.unlockedWeapons.includes(fallback.id)) {\n    return fallback;\n  }\n\n  return WEAPONS_BY_ID.pulse;\n}\n\nfunction getUpgradeLevelsOnly() {\n  const owned = shop.getSnapshot().ownedLevels;\n  const levels = {};\n  for (const [id, level] of Object.entries(owned)) {\n    if (ITEMS_BY_ID[id]) {\n      levels[id] = level;\n    }\n  }\n  return levels;\n}\n\nfunction applyOwnedLevelsToPlayer() {\n  if (!state.player) {\n    return;\n  }\n  const upgradeLevels = getUpgradeLevelsOnly();\n  applyUpgradeLevels(state.player, upgradeLevels, ITEMS_BY_ID);\n}\n\nfunction startRun(incrementPlayCount) {\n  if (incrementPlayCount) {\n    profile.playCount += 1;\n  }\n\n  const runNumber = Math.max(1, profile.playCount);\n  state.levelIndex = (runNumber - 1) % LEVELS.length;\n  state.level = LEVELS[state.levelIndex];\n  state.levelRuntime = createLevelRuntime(state.level);\n  state.enemies.length = 0;\n  state.coins.length = 0;\n  state.projectiles = createProjectilePool();\n  state.score = 0;\n  state.runCoins = 0;\n  state.elapsedSeconds = 0;\n  state.gameOver = false;\n  state.gameWon = false;\n\n  const character = getCurrentCharacter();\n  const weapon = getCurrentWeapon(character);\n  state.player = createPlayer(character, weapon);\n  applyOwnedLevelsToPlayer();\n\n  state.aimDir = { x: 0, y: -1 };\n  state.moveDir = { x: 0, y: 0 };\n  state.hasExplicitAim = false;\n\n  ui.showToast(`Entering ${state.level.name}`, \"success\", 1500);\n  queueSave();\n}\n\nfunction tick(dtSeconds) {\n  if (!state.player) {\n    return;\n  }\n\n  state.elapsedSeconds += dtSeconds;\n\n  savePlayerPreviousPosition(state.player);\n  for (const enemy of state.enemies) {\n    saveEnemyPrevious(enemy);\n  }\n  for (const coin of state.coins) {\n    coin.prevX = coin.x;\n    coin.prevY = coin.y;\n  }\n\n  state.moveDir = input.getMovementVector();\n\n  const aimInput = input.getAimVector();\n  if (aimInput.x || aimInput.y) {\n    state.aimDir = normalize(aimInput);\n    state.hasExplicitAim = true;\n  }\n\n  setPlayerAim(state.player, state.aimDir);\n  input.setPlayerScreenPosition(state.player.x, state.player.y);\n\n  if (state.gameOver) {\n    if (input.consumeShootRequested()) {\n      startRun(true);\n    }\n    return;\n  }\n\n  updatePlayer(state.player, state.moveDir, dtSeconds, WORLD);\n\n  const requestedShot = input.consumeShootRequested();\n  if (requestedShot) {\n    const fallbackAim = resolveFallbackAim();\n    state.aimDir = normalize(fallbackAim);\n    setPlayerAim(state.player, state.aimDir);\n    firePlayerWeapon(state.aimDir);\n  }\n\n  updateLevel(state.levelRuntime, state, dtSeconds, (type, pattern, difficulty) => {\n    const enemy = createEnemy(++state.enemyIdSeed, type, pattern, difficulty, WORLD);\n    state.enemies.push(enemy);\n  });\n\n  for (const enemy of state.enemies) {\n    updateEnemy(enemy, dtSeconds, state.player, state.elapsedSeconds, (sourceEnemy, direction) => {\n      spawnProjectile(state.projectiles, {\n        x: sourceEnemy.x,\n        y: sourceEnemy.y,\n        vx: direction.x * sourceEnemy.shotSpeed,\n        vy: direction.y * sourceEnemy.shotSpeed,\n        owner: \"enemy\",\n        size: SIZES.ENEMY_PROJECTILE,\n        damage: sourceEnemy.shotDamage,\n        ttl: 4\n      });\n    });\n  }\n\n  updateProjectiles(state.projectiles, dtSeconds, WORLD);\n  updateCoins(dtSeconds);\n\n  checkProjectileEnemyCollisions(\n    state.projectiles,\n    state.enemies,\n    () => {\n      sfx.play(\"hit\");\n    },\n    (enemy) => {\n      state.score += Math.round(enemy.maxHealth * 4);\n      dropCoins(enemy.x, enemy.y, Math.max(1, Math.round(enemy.size / 12)));\n      sfx.play(\"enemyDeath\");\n    }\n  );\n\n  checkProjectilePlayerCollisions(state.projectiles, state.player, (projectile) => {\n    const damageDone = takePlayerDamage(state.player, projectile.damage);\n    if (damageDone > 0) {\n      sfx.play(\"hit\");\n    }\n  });\n\n  const contactEnemy = checkPlayerEnemyCollision(state.player, state.enemies);\n  if (contactEnemy) {\n    const damageDone = takePlayerDamage(state.player, contactEnemy.contactDamage * dtSeconds * 6.2);\n    if (damageDone > 0) {\n      sfx.play(\"hit\");\n    }\n  }\n\n  cleanupEntities();\n  state.score += dtSeconds * 7;\n\n  if (state.player.health <= 0) {\n    finishRun(false);\n  }\n\n  if (state.levelRuntime.completed && state.enemies.length === 0) {\n    onLevelCompleted();\n  }\n\n  announceUnlocks();\n  renderHud();\n\n  if (shopOpen) {\n    renderShop();\n  }\n\n  if (Math.floor(state.elapsedSeconds * 10) % 13 === 0) {\n    queueSave();\n  }\n}\n\nfunction resolveFallbackAim() {\n  if (state.hasExplicitAim && (state.aimDir.x || state.aimDir.y)) {\n    return state.aimDir;\n  }\n  if (state.moveDir.x || state.moveDir.y) {\n    return state.moveDir;\n  }\n  return { x: 0, y: TUNING.SHOOT_FALLBACK_Y };\n}\n\nfunction firePlayerWeapon(direction) {\n  if (!consumePlayerShot(state.player)) {\n    return;\n  }\n\n  const weapon = state.player.weapon;\n  const baseAngle = Math.atan2(direction.y, direction.x);\n  const spread = (weapon.spreadDegrees * Math.PI) / 180;\n  const totalProjectiles = weapon.projectilesPerShot;\n\n  for (let i = 0; i < totalProjectiles; i += 1) {\n    const t = totalProjectiles === 1 ? 0.5 : i / (totalProjectiles - 1);\n    const offset = (t - 0.5) * spread;\n    const dir = fromAngle(baseAngle + offset);\n\n    const damage = (weapon.damage + state.player.baseDamage) * state.player.damageMultiplier;\n    const speed = weapon.projectileSpeed * state.player.projectileSpeedMultiplier;\n\n    spawnProjectile(state.projectiles, {\n      x: state.player.x + dir.x * (state.player.size + 4),\n      y: state.player.y + dir.y * (state.player.size + 4),\n      vx: dir.x * speed,\n      vy: dir.y * speed,\n      owner: \"player\",\n      size: SIZES.PROJECTILE,\n      damage,\n      ttl: 2,\n      special: weapon.special,\n      pierceLeft: weapon.special === \"piercing\" ? 1 : 0,\n      explosionRadius: weapon.special === \"explosive\" ? 32 : 0\n    });\n  }\n\n  sfx.play(\"shoot\");\n}\n\nfunction updateCoins(dtSeconds) {\n  const pickupRadius = state.player.pickupRadius;\n\n  for (const coin of state.coins) {\n    if (!coin.active) {\n      continue;\n    }\n\n    coin.age += dtSeconds;\n    coin.vx *= 0.94;\n    coin.vy *= 0.94;\n    coin.x += coin.vx * dtSeconds;\n    coin.y += coin.vy * dtSeconds;\n\n    if (coin.age > TUNING.COIN_LIFETIME_SECONDS) {\n      coin.active = false;\n      continue;\n    }\n\n    const dx = state.player.x - coin.x;\n    const dy = state.player.y - coin.y;\n    const distance = Math.hypot(dx, dy);\n    if (distance <= pickupRadius) {\n      coin.active = false;\n      state.runCoins += coin.value;\n      shop.addCoins(coin.value);\n      profile.bankCoins = shop.getCoins();\n      profile.totalCoinsCollected += coin.value;\n      sfx.play(\"coin\");\n      queueSave();\n    }\n  }\n}\n\nfunction dropCoins(x, y, count) {\n  for (let i = 0; i < count; i += 1) {\n    if (state.coins.length >= 180) {\n      break;\n    }\n\n    const angle = Math.random() * Math.PI * 2;\n    const speed = 30 + Math.random() * 60;\n\n    state.coins.push({\n      id: ++state.coinIdSeed,\n      active: true,\n      x,\n      y,\n      prevX: x,\n      prevY: y,\n      vx: Math.cos(angle) * speed,\n      vy: Math.sin(angle) * speed,\n      value: 1,\n      size: SIZES.COIN,\n      age: 0\n    });\n  }\n}\n\nfunction cleanupEntities() {\n  state.enemies = state.enemies.filter((enemy) => enemy.alive);\n  state.coins = state.coins.filter((coin) => coin.active);\n}\n\nfunction onLevelCompleted() {\n  if (!profile.levelsCompleted.includes(state.level.id)) {\n    profile.levelsCompleted.push(state.level.id);\n  }\n\n  const levelBest = profile.perLevelBest[state.level.id] ?? 0;\n  profile.perLevelBest[state.level.id] = Math.max(levelBest, Math.floor(state.score));\n\n  if (state.levelIndex < LEVELS.length - 1) {\n    state.levelIndex += 1;\n    state.level = LEVELS[state.levelIndex];\n    state.levelRuntime = createLevelRuntime(state.level);\n    ui.showToast(`Level clear. Entering ${state.level.name}`, \"success\", 1800);\n    sfx.play(\"levelUp\");\n    queueSave();\n    return;\n  }\n\n  finishRun(true);\n}\n\nfunction finishRun(won) {\n  state.gameOver = true;\n  state.gameWon = won;\n\n  profile.highScore = Math.max(profile.highScore, Math.floor(state.score));\n  profile.bankCoins = shop.getCoins();\n  profile.ownedLevels = shop.getSnapshot().ownedLevels;\n  queueSave();\n\n  const msg = won\n    ? `Run complete! Score ${Math.floor(state.score)}. Tap fire to restart.`\n    : `Downed! Score ${Math.floor(state.score)}. Tap fire to retry.`;\n  ui.showToast(msg, won ? \"success\" : \"error\", 2100);\n}\n\nfunction renderHud() {\n  ui.renderHud({\n    health: state.player.health,\n    maxHealth: state.player.maxHealth,\n    score: state.score,\n    runCoins: state.runCoins,\n    bankCoins: shop.getCoins()\n  });\n}\n\nfunction renderShop() {\n  const entries = catalog.map((item) => {\n    const level = shop.getLevel(item.id);\n    const nextCost = shop.getNextCost(item.id);\n    return {\n      id: item.id,\n      name: item.name,\n      description: item.description,\n      kind: item.kind,\n      level,\n      maxLevel: item.maxLevel,\n      nextCost,\n      unlocked: unlockConditionMet(item.unlockCondition, profile),\n      unlockText: describeUnlock(item.unlockCondition)\n    };\n  });\n\n  ui.renderShopEntries(entries, shop.getCoins());\n}\n\nfunction onCatalogPurchase(itemId) {\n  const item = catalog.find((entry) => entry.id === itemId);\n  if (!item) {\n    return;\n  }\n\n  if (item.reward?.type === \"character\") {\n    if (!profile.unlockedCharacters.includes(item.reward.id)) {\n      profile.unlockedCharacters.push(item.reward.id);\n      profile.selectedCharacterId = item.reward.id;\n      ui.showToast(`${CHARACTERS_BY_ID[item.reward.id].name} unlocked`, \"success\", 1800);\n    }\n  }\n\n  if (item.reward?.type === \"weapon\") {\n    if (!profile.unlockedWeapons.includes(item.reward.id)) {\n      profile.unlockedWeapons.push(item.reward.id);\n      profile.selectedWeaponId = item.reward.id;\n      if (state.player) {\n        setPlayerWeapon(state.player, WEAPONS_BY_ID[item.reward.id]);\n      }\n      ui.showToast(`${WEAPONS_BY_ID[item.reward.id].name} unlocked`, \"success\", 1800);\n    }\n  }\n\n  profile.bankCoins = shop.getCoins();\n  profile.ownedLevels = shop.getSnapshot().ownedLevels;\n}\n\nfunction announceUnlocks() {\n  for (const item of catalog) {\n    if (shop.getLevel(item.id) > 0) {\n      continue;\n    }\n\n    if (!unlockConditionMet(item.unlockCondition, profile)) {\n      continue;\n    }\n\n    if (announcedUnlockables.has(item.id)) {\n      continue;\n    }\n\n    announcedUnlockables.add(item.id);\n    ui.showToast(`Unlocked in shop: ${item.name}`, \"success\", 1800);\n    sfx.play(\"levelUp\");\n  }\n}\n\nfunction queueSave() {\n  if (saveQueued) {\n    return;\n  }\n\n  saveQueued = true;\n  window.setTimeout(async () => {\n    saveQueued = false;\n    profile.bankCoins = shop.getCoins();\n    profile.ownedLevels = shop.getSnapshot().ownedLevels;\n    sanitizeProfileSelections();\n\n    await Promise.all([\n      storage.set(STORAGE_KEYS.PROFILE, profile),\n      shop.persist()\n    ]);\n  }, 100);\n}\n\nfunction buildShopCatalog() {\n  const upgrades = ITEMS.map((item) => ({\n    ...item,\n    unlockCondition: { type: \"default\", value: 0 }\n  }));\n\n  const characters = CHARACTERS.filter((character) => character.id !== \"runner\").map((character, index) => ({\n    id: `character:${character.id}`,\n    name: `Unlock ${character.name}`,\n    kind: \"character\",\n    description: \"Playable character unlock.\",\n    maxLevel: 1,\n    costs: [120 + index * 72],\n    unlockCondition: character.unlockCondition,\n    reward: { type: \"character\", id: character.id }\n  }));\n\n  const weaponUnlocks = [\n    { id: \"twin\", unlockCondition: { type: \"playCount\", value: 2 }, cost: 170 },\n    { id: \"nova\", unlockCondition: { type: \"levelsCompleted\", value: 1 }, cost: 300 },\n    { id: \"rail\", unlockCondition: { type: \"score\", value: 1800 }, cost: 390 }\n  ].map((entry) => ({\n    id: `weapon:${entry.id}`,\n    name: `Unlock ${WEAPONS_BY_ID[entry.id].name}`,\n    kind: \"weapon\",\n    description: \"Weapon unlock for future runs.\",\n    maxLevel: 1,\n    costs: [entry.cost],\n    unlockCondition: entry.unlockCondition,\n    reward: { type: \"weapon\", id: entry.id }\n  }));\n\n  return [...upgrades, ...characters, ...weaponUnlocks];\n}\n\nfunction unlockConditionMet(condition, sourceProfile) {\n  if (!condition || condition.type === \"default\") {\n    return true;\n  }\n\n  if (condition.type === \"playCount\") {\n    return sourceProfile.playCount >= condition.value;\n  }\n\n  if (condition.type === \"coins\") {\n    return sourceProfile.totalCoinsCollected >= condition.value;\n  }\n\n  if (condition.type === \"levelsCompleted\") {\n    return sourceProfile.levelsCompleted.length >= condition.value;\n  }\n\n  if (condition.type === \"score\") {\n    return sourceProfile.highScore >= condition.value;\n  }\n\n  return false;\n}\n\nfunction describeUnlock(condition) {\n  if (!condition || condition.type === \"default\") {\n    return \"Available\";\n  }\n\n  if (condition.type === \"playCount\") {\n    return `Play ${condition.value} runs`;\n  }\n\n  if (condition.type === \"coins\") {\n    return `Collect ${condition.value} total coins`;\n  }\n\n  if (condition.type === \"levelsCompleted\") {\n    return `Complete ${condition.value} levels`;\n  }\n\n  if (condition.type === \"score\") {\n    return `Reach high score ${condition.value}`;\n  }\n\n  return \"Progress required\";\n}\n\nasync function registerServiceWorker() {\n  if (!(\"serviceWorker\" in navigator)) {\n    ui.showToast(\"Service workers unsupported in this browser\", \"error\", 2000);\n    return;\n  }\n\n  try {\n    swRegistration = await navigator.serviceWorker.register(\"./service-worker.js\", { scope: \"./\" });\n\n    if (swRegistration.waiting) {\n      onServiceWorkerWaiting(swRegistration.waiting);\n    }\n\n    swRegistration.addEventListener(\"updatefound\", () => {\n      const installing = swRegistration.installing;\n      if (!installing) {\n        return;\n      }\n\n      installing.addEventListener(\"statechange\", () => {\n        if (installing.state === \"installed\" && navigator.serviceWorker.controller) {\n          onServiceWorkerWaiting(swRegistration.waiting ?? installing);\n        }\n      });\n    });\n\n    navigator.serviceWorker.addEventListener(\"message\", (event) => {\n      if (event.data?.type === \"SWUPDATEAVAILABLE\") {\n        onServiceWorkerWaiting(swRegistration?.waiting ?? null);\n      }\n    });\n\n    navigator.serviceWorker.addEventListener(\"controllerchange\", () => {\n      if (swReloaded) {\n        return;\n      }\n      swReloaded = true;\n      window.location.reload();\n    });\n  } catch (error) {\n    console.error(\"Service worker registration failed\", error);\n    ui.showToast(\"Offline mode unavailable\", \"error\", 1700);\n  }\n}\n\nfunction onServiceWorkerWaiting(worker) {\n  waitingWorker = worker;\n  ui.showUpdateBanner(true);\n  sfx.play(\"updateAvailable\");\n}\n\nwindow.addEventListener(\"beforeunload\", () => {\n  input.destroy();\n  engine.stop();\n});\n"],
  "mappings": "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",
  "names": ["ctx", "sfx", "spawnProjectile", "canvas", "movePad", "moveKnob", "aimPad", "aimKnob", "state", "ctx", "canvas", "state", "length", "state", "storage", "catalog", "renderHud"]
}
